import random
import time
import threading
word_list = [
    "ã‚Šã‚“ã”", "ã¿ã‹ã‚“", "ã°ãªãª", "ã™ã„ã‹", "ã‚‚ã‚‚", "ã‚ã‚ã‚“", "ã„ã¡ã”", "ãªã—", "ã¶ã©ã†", "ã•ãã‚‰ã‚“ã¼",
    "ãŠã¡ã‚ƒ", "ã“ã†ã¡ã‚ƒ", "ã“ãƒ¼ã²ãƒ¼", "ã¿ãš", "ã˜ã‚…ãƒ¼ã™", "ãã‚…ã†ã«ã‚…ã†", "ã®ã‚Š", "ãŸã¾ã”", "ã«ã", "ã•ã‹ãª",
    "ã„ã¬", "ã­ã“", "ã†ã¾", "ã—ã‹", "ã•ã‚‹", "ãã†", "ãã‚Šã‚“", "ãã¾", "ãŸã¬ã", "ã†ã•ã",
    "ã¨ã‚Š", "ã‹ãˆã‚‹", "ã¸ã³", "ã‹ã«", "ãã‚‰ã’", "ã„ã‹", "ãŸã“", "ãºã‚“ãã‚“", "ã‚ã«", "ã“ã‚ã‚‰",
    "ã„ã™", "ã¤ããˆ", "ã¨ã‘ã„", "ã‹ã¹", "ã¾ã©", "ã§ã‚“ã", "ã»ã‚“", "ã–ã£ã—", "ãµã", "ã¼ã†ã—",
    "ã‹ã•", "ãã¤", "ã‘ã„ãŸã„", "ã§ã‚“ã‚", "ã›ã‚“ãŸãã", "ã‚Œã„ãã†ã“", "ãã†ã˜ã", "ã¦ã‚Œã³",
    "ãŠã‚‚ã¡ã‚ƒ", "ã‘ã‚“ã ã¾", "ã“ã¾", "ã—ã‚ƒã¼ã‚“ã ã¾", "ãµã†ã›ã‚“", "ã™ã”ã‚ã", "ã±ãšã‚‹", "ã•ã„ã“ã‚", "ã‚†ã†ãˆã‚“ã¡",
    "ã‚„ã¾", "ã‹ã‚", "ã†ã¿", "ãã‚‰", "ã¯ãª", "ã", "ã‚‚ã‚Š", "ã¤ã", "ãŸã„ã‚ˆã†", "ã»ã—",
    "ã“ã†ãˆã‚“", "ãŒã£ã“ã†", "ã„ãˆ", "ã¾ã¡", "ã§ã‚“ã—ã‚ƒ", "ãˆã", "ãã†ã“ã†", "ã³ã˜ã‚…ã¤ã‹ã‚“",
    "ã†ã‚Œã—ã„", "ã‹ãªã—ã„", "ãŸã®ã—ã„", "ã“ã‚ã„", "ã•ã³ã—ã„", "ã­ã‚€ã„", "ã¤ã‹ã‚ŒãŸ", "ã¯ã‚‰ã¸ã£ãŸ", "ã³ã£ãã‚Š",
    "ã˜ã—ã‚“", "ã¦ã‚“ã", "ã˜ã¦ã‚“", "ã²ã“ã†ã", "ã‚Œã‚“ã—ã‚…ã†", "ã¹ã‚“ãã‚‡ã†", "ã›ã‚“ã›ã„", "ãŒã£ã“ã†", "ã—ã‚…ãã ã„",
    "ã‘ã„ãŸã„", "ã§ã‚“ã‚", "ã—ã‚ƒã—ã‚“", "ã†ã‚“ã¦ã‚“", "ã˜ã©ã†ã—ã‚ƒ", "ã—ã”ã¨", "ã‚„ã™ã¿", "ã—ã‚“ã”ã†", "ã¡ãš",
    "ã³ã‚‡ã†ã„ã‚“", "ã„ã‚Šãã¡", "ã§ãã¡", "ãŸã„ã‚ˆã†", "ã¡ãã‚…ã†", "ãµã†ã‘ã„", "ã‹ã„ãŒã‚“", "ã‹ã‚ãã¡", "ã•ã‚“ã¡", "ã†ã¡ã‚…ã†", "ã‚„ã¾ã¿ã¡",
    "ãŸã«ã¾", "ã»ã£ãã‚‡ã", "ãªã‚“ãã‚‡ã", "ã‘ã„ã•ã‚“", "ã‚‚ã‚“ã ã„", "ã‹ã„ã¨ã†", "ã›ã„ã‹ã„", "ã—ã‘ã‚“", "ã‚Œãã—", "ã™ã†ãŒã", "ã¶ã‚“ãŒã",
    "ã‚Šã‹", "ã³ã˜ã‚…ã¤", "ãŠã‚“ãŒã", "ã“ã†ã†ã‚“", "ãµã“ã†", "ã—ã‚ã‚ã›", "ã‚ã‚“ãœã‚“", "ãã‘ã‚“", "ãŸã„ã›ã¤", "ã˜ã‚†ã†", "ã¸ã„ã‚", "ã˜ã ã„", "ã—ã‚“ã›ã¤"
]
count = 0
miss_count = 0
game_over = False
name = input("åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„: ")
def end():
    global game_over
    time.sleep(30)
    game_over = True
def file_keep():
    global count, miss_count, name
    with open("typing_scores.txt", "a", encoding="utf-8") as file:
        file.write(f"{name}-{count}å€‹-{miss_count}ãƒŸã‚¹\n")
    scores = []
    with open("typing_scores.txt", "r", encoding="utf-8") as file:
        for line in file:
            parts = line.strip().split("-")
            if len(parts) == 3:
                uname = parts[0]
                try:
                    ucount = int(parts[1].replace("å€‹", ""))
                    umiss = parts[2].replace("ãƒŸã‚¹", "")
                    scores.append((uname, ucount, umiss))
                except ValueError:
                    continue
    scores.sort(key=lambda x: x[1], reverse=True)
    print("ğŸ† ãƒ©ãƒ³ã‚­ãƒ³ã‚° ğŸ†")
    for i, (uname, ucount, umiss) in enumerate(scores[:5], start=1):
        print(f"{i}ä½: {uname} - {ucount}å€‹ - {umiss}ãƒŸã‚¹")
def play_game():
    global game_over, count, miss_count
    e = threading.Thread(target=end)
    e.start()
    while not game_over:
        word = random.choice(word_list)
        print(word)
        user_input = input(">> ")
        if user_input != word:
            print("ãƒŸã‚¹â—ï¸")
            miss_count += 1
        else:
            count += 1
    print(f"\næ™‚é–“åˆ‡ã‚Œâ—ï¸\næ‰“ã¦ãŸæ•°: {count}å€‹ - ãƒŸã‚¹: {miss_count}å›\n")
    file_keep()
print("ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚²ãƒ¼ãƒ ğŸ’»")
input("Enterã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¾ã™")
print("Ready...")
time.sleep(2)
print("Go!")
play_game()